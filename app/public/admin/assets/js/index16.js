import{f as P,w as D,O as N,S as V,a as j,P as H,Q as I,E as c}from"./element-plus.js";import{l as M,a as O}from"./sys_role.js";import{u as Q}from"./vue-router.js";import{H as $,E as q,B as z}from"./@element-plus.js";import{_ as K}from"./index.js";import{r,n as L,ab as A,c as F,o as f,O as t,L as o,a3 as g,Q as G,K as J,H as U,u as p}from"./@vue.js";import"./dayjs.js";import"./lodash-es.js";import"./@popperjs.js";import"./async-validator.js";import"./@ctrl.js";import"./memoize-one.js";import"./normalize-wheel-es.js";import"./pinia.js";import"./pinia-plugin-persist.js";import"./vanilla-jsoneditor.js";import"./json-source-map.js";import"./@jsonquerylang.js";import"./@fortawesome.js";import"./natural-compare-lite.js";import"./fast-deep-equal.js";import"./fast-uri.js";import"./jmespath.js";import"./jsonpath-plus.js";import"./@codemirror.js";import"./@lezer.js";import"./crelt.js";import"./@marijn.js";import"./style-mod.js";import"./w3c-keyname.js";import"./@replit.js";import"./immutable-json-patch.js";import"./jsonrepair.js";import"./axios.js";import"./js-cookie.js";import"./nprogress.js";/* empty css     */const W={class:"pd-20 bg-fff radius-6 bg-fff"},X={__name:"index",setup(Y){const b=Q(),y=r(null),m=r([]),h=r([]),d=r(0),u=r(1),i=async()=>{try{const e=await M(u.value);e.code===200?(m.value=[...e.data.list],d.value=e.data.count):c({message:e.msg,type:"success"})}catch(e){console.log(e)}},w=e=>{u.value=e,i()},k=e=>{h.value=e},v=e=>{const n=e.id;b.push({name:"role-edit",params:{id:n}})},C=async e=>{const n=e.id;try{const a=await O(n);a.code===200?(c({message:"删除成功 ^_^",type:"success"}),i()):c({message:a.msg,type:"success"})}catch(a){console.log(a)}};return L(()=>{i()}),(e,n)=>{const a=P,E=A("router-link"),_=D,s=N,x=j,T=V,B=H,R=I;return f(),F("div",W,[t(_,{type:"flex",class:"mt-10 mb-10",justify:"end"},{default:o(()=>[t(E,{to:"/role/add"},{default:o(()=>[t(a,{type:"primary",round:""},{default:o(()=>n[0]||(n[0]=[g("新增")])),_:1})]),_:1})]),_:1}),t(B,{ref_key:"multipleTableRef",ref:y,data:m.value,"tooltip-effect":"dark","row-key":"id",onSelectionChange:k},{default:o(()=>[t(s,{type:"selection"}),t(s,{prop:"id",width:"100",label:"编号"}),t(s,{prop:"name",width:"300",label:"名称"}),t(s,{prop:"value",label:"角色"}),t(s,{prop:"status",label:"状态"},{default:o(l=>[g(G(l.row.status=="1"?"正常":"停用"),1)]),_:1}),t(s,{fixed:"right",width:"150",label:"操作"},{default:o(l=>[t(a,{icon:p($),disabled:l.row.id<4,circle:"",onClick:S=>v(l.row)},null,8,["icon","disabled","onClick"]),t(a,{icon:p(q),disabled:l.row.id<4,circle:"",onClick:S=>C(l.row)},null,8,["icon","disabled","onClick"]),l.row.id<4?(f(),J(T,{key:0,content:"系统默认角色，禁止删除",effect:"light",placement:"top-start"},{default:o(()=>[t(x,{class:"ml-10 t-4 pointer"},{default:o(()=>[t(p(z),{class:"c-165dff"})]),_:1})]),_:1})):U("",!0)]),_:1})]),_:1},8,["data"]),t(_,{type:"flex",class:"mt-20 align-c",justify:"center"},{default:o(()=>[t(R,{background:"",layout:"prev, pager, next",onCurrentChange:w,"page-size":10,total:d.value,"hide-on-single-page":""},null,8,["total"])]),_:1})])}}},It=K(X,[["__scopeId","data-v-678a2fbe"]]);export{It as default};
