System.register(["./element-plus-legacy.js","./category-legacy.js","./collect-legacy.js","./index-legacy.js","./@vue-legacy.js","./dayjs-legacy.js","./@element-plus-legacy.js","./lodash-es-legacy.js","./@popperjs-legacy.js","./async-validator-legacy.js","./@ctrl-legacy.js","./memoize-one-legacy.js","./normalize-wheel-es-legacy.js","./pinia-legacy.js","./pinia-plugin-persist-legacy.js","./vanilla-jsoneditor-legacy.js","./json-source-map-legacy.js","./@jsonquerylang-legacy.js","./@fortawesome-legacy.js","./natural-compare-lite-legacy.js","./fast-deep-equal-legacy.js","./fast-uri-legacy.js","./jmespath-legacy.js","./jsonpath-plus-legacy.js","./@codemirror-legacy.js","./@lezer-legacy.js","./crelt-legacy.js","./@marijn-legacy.js","./style-mod-legacy.js","./w3c-keyname-legacy.js","./@replit-legacy.js","./immutable-json-patch-legacy.js","./jsonrepair-legacy.js","./vue-router-legacy.js","./axios-legacy.js","./js-cookie-legacy.js","./nprogress-legacy.js","./saduo-legacy.js"],(function(e,l){"use strict";var a,t,s,r,u,c,n,d,o,g,i,m,p,y,f,j,h,_,V,b,v,T,U,w,k,x,q,N,z,C,$,D,H;return{setters:[e=>{a=e.m,t=e.n,s=e.r,r=e.s,u=e.L,c=e.H,n=e.f,d=e.T,o=e.x,g=e.q,i=e.E},e=>{m=e.f},e=>{p=e.g,y=e.a,f=e.c},e=>{j=e._,h=e.a,_=e.t,V=e.b},e=>{b=e.r,v=e.W,T=e.n,U=e.c,w=e.o,k=e.O,x=e.L,q=e.K,N=e.H,z=e.a,C=e.a3,$=e.I,D=e.ac,H=e.Q},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){var l=document.createElement("style");l.textContent="[data-v-e3da4894] .show .el-form-item__content{flex-direction:column;align-items:start}\n/*$vite$:1*/",document.head.appendChild(l);const L={class:"bg-fff pd-20 radius-6"},E={class:"flex w-full"},S={class:"flex w-full"},I={class:"flex w-full"},M=["href"],O={class:"flex w-full"},R={class:"f-15"},A=["innerHTML"];e("default",j({__name:"add",setup(e){const l=b(null),j=b("list"),B=b([]),K={checkStrictly:!0},P=b([]),Q=v({taskName:"",targetUrl:"",listTag:"",startNum:1,endNum:1,increment:1,pages:[],titleTag:"",articleTag:"",charset:"1",parseData:"return data;",status:"1",cid:1}),W=b([]),F=v({}),G=e=>{-1!==e[0]&&(Q.cid=e[e.length-1])},J=async()=>{try{let{targetUrl:e,listTag:l,charset:a}=Q,t=await p({targetUrl:e,listTag:l,charset:a});if(200===t.code){let l=t.data;const a=/^(.*:\/\/[^\/]+).*$/,s=e.match(a),r=s?s[1]:"";l[0].includes("http")||(l=l.map((e=>`${r}${e}`))),Q.pages=l,i({message:"列表地址获取成功^_^",type:"success"})}}catch(e){console.log(e)}},X=async()=>{try{let{targetUrl:e,startNum:l,endNum:a,increment:t}=Q,s=[];for(let r=l;r<=a;r+=t){let l=e.replace("${page}",r);s.push(l)}W.value=s,await Promise.all(W.value.map((async(e,l)=>{let{listTag:a,charset:t}=Q;if(l>0){let l=await p({targetUrl:e,listTag:a,charset:t});200===l.code&&(Q.pages=[...Q.pages,...l.data])}})))}catch(e){console.log(e)}},Y=async()=>{try{let{titleTag:e,articleTag:l,parseData:a,charset:t}=Q,s=Q.pages[0]||"",r=await y({taskUrl:s,titleTag:e,articleTag:l,parseData:a,charset:t});200===r.code&&(F.title=r.data.title,F.article=r.data.article,i({message:"内容获取成功^_^",type:"success"}))}catch(e){console.log(e)}},Z=e=>{e.validate(((e,l)=>{if(!e)return V(l),!1;(async()=>{try{let e={...Q};e.pages=Q.pages.join(",");let l=await f(e);200===l.code?(i({message:"新增成功^_^",type:"success"}),ee()):i({message:l.msg,type:"error"})}catch(e){console.log(e)}})()}))},ee=()=>{window.history.back()};return T((()=>{(async()=>{try{let e=await m();if(200===e.code){let l=h(_(e.data));P.value=[...l]}}catch(e){console.log(e)}})()})),(e,i)=>{const m=r,p=s,y=c,f=u,h=n,_=t,V=d,b=o,v=a,T=g;return w(),U("div",L,[k(T,{ref_key:"formRef",ref:l,model:Q,"label-width":"84px"},{default:x((()=>[k(v,{modelValue:j.value,"onUpdate:modelValue":i[13]||(i[13]=e=>j.value=e),class:"demo-tabs"},{default:x((()=>[k(_,{label:"列表测试",name:"list"},{default:x((()=>[k(p,{label:"任务名称",prop:"taskName",rules:[{required:!0,message:"请输入任务名称",trigger:"blur"}]},{default:x((()=>[k(m,{modelValue:Q.taskName,"onUpdate:modelValue":i[0]||(i[0]=e=>Q.taskName=e),placeholder:"例：前端库-chat问答"},null,8,["modelValue"])])),_:1}),k(p,{label:"列表网址",prop:"targetUrl",rules:[{required:!0,message:"请输入匹配网址",trigger:"blur"}]},{default:x((()=>[z("div",E,[k(m,{class:"flex-1",modelValue:Q.targetUrl,"onUpdate:modelValue":i[1]||(i[1]=e=>Q.targetUrl=e),placeholder:"/SEO/1_${page}.html"},null,8,["modelValue"])])])),_:1}),k(p,{label:"字符集",prop:"charset",rules:[{required:!0,message:"请选择字符集",trigger:"blur"}]},{default:x((()=>[k(f,{modelValue:Q.charset,"onUpdate:modelValue":i[2]||(i[2]=e=>Q.charset=e),class:"ml-4"},{default:x((()=>[k(y,{value:"1",size:"large"},{default:x((()=>i[14]||(i[14]=[C("uft-8")]))),_:1}),k(y,{value:"2",size:"large"},{default:x((()=>i[15]||(i[15]=[C("gb2312")]))),_:1})])),_:1},8,["modelValue"])])),_:1}),k(p,{label:"列表链接",prop:"listTag",rules:[{required:!0,message:"请输入文章列表标签",trigger:"blur"}]},{default:x((()=>[z("div",S,[k(m,{class:"flex-1",modelValue:Q.listTag,"onUpdate:modelValue":i[3]||(i[3]=e=>Q.listTag=e),placeholder:"例：.content h4 a"},null,8,["modelValue"]),k(h,{class:"ml-5",type:"primary",onClick:J},{default:x((()=>i[16]||(i[16]=[C(" 测试 ")]))),_:1})])])),_:1}),k(p,{label:"开始页面"},{default:x((()=>[z("div",I,[k(m,{class:"flex-1",modelValue:Q.startNum,"onUpdate:modelValue":i[4]||(i[4]=e=>Q.startNum=e)},null,8,["modelValue"]),i[18]||(i[18]=z("span",{class:"ml-5 mr-5"},"至",-1)),k(m,{class:"flex-1",modelValue:Q.endNum,"onUpdate:modelValue":i[5]||(i[5]=e=>Q.endNum=e)},null,8,["modelValue"]),i[19]||(i[19]=z("span",{class:"ml-5 mr-5"},"每页递增",-1)),k(m,{class:"flex-1 mr-5",modelValue:Q.increment,"onUpdate:modelValue":i[6]||(i[6]=e=>Q.increment=e)},null,8,["modelValue"]),k(h,{type:"primary",onClick:X},{default:x((()=>i[17]||(i[17]=[C("测试")]))),_:1})])])),_:1}),W.value.length>0?(w(),q(p,{key:0,label:"列表地址"},{default:x((()=>[(w(!0),U($,null,D(W.value,((e,l)=>(w(),U("p",{class:"mr-30",key:l},H(e),1)))),128))])),_:1})):N("",!0),Q.pages.length>0?(w(),q(p,{key:1,label:"文章地址"},{default:x((()=>[(w(!0),U($,null,D(Q.pages,((e,l)=>(w(),U("p",{class:"mr-30",key:l},H(e),1)))),128))])),_:1})):N("",!0)])),_:1}),k(_,{label:"内容测试",name:"article"},{default:x((()=>[k(p,{label:"目标地址"},{default:x((()=>[z("a",{class:"mr-10",href:Q.pages[0],target:"_blank"},H(Q.pages[0]),9,M),i[20]||(i[20]=C("（默认第一个作为测试） "))])),_:1}),k(p,{label:"文章标题",prop:"titleTag",rules:[{required:!0,message:"请输入文章标题",trigger:"blur"}]},{default:x((()=>[k(m,{class:"flex-1",placeholder:"例：.title",modelValue:Q.titleTag,"onUpdate:modelValue":i[7]||(i[7]=e=>Q.titleTag=e)},null,8,["modelValue"])])),_:1}),k(p,{label:"文章内容",prop:"articleTag",rules:[{required:!0,message:"请输入文章内容",trigger:"blur"}]},{default:x((()=>[k(m,{placeholder:"例：.article",modelValue:Q.articleTag,"onUpdate:modelValue":i[8]||(i[8]=e=>Q.articleTag=e)},null,8,["modelValue"])])),_:1}),k(p,{label:"处理函数",prop:"parseData",rules:[{required:!0,message:"如果无特殊处理，请直接填写 return data;",trigger:"blur"}]},{default:x((()=>[z("div",O,[k(m,{class:"flex-1",type:"textarea",rows:13,modelValue:Q.parseData,"onUpdate:modelValue":i[9]||(i[9]=e=>Q.parseData=e),placeholder:"如果不做任何处理，直接返回data。拿到的文本是变量是data,可以直接js函数可以处理成需要的数据，最终需要返回data。例：\r\n            data = data.replaceAll('<BR>','<br/>');\r\n            return data;\r\n            //或\r\n            return data;\r\n            "},null,8,["modelValue"]),k(h,{class:"ml-5",type:"primary",onClick:Y},{default:x((()=>i[21]||(i[21]=[C(" 测试 ")]))),_:1})])])),_:1}),F.title?(w(),q(p,{key:0,label:"采集结果"},{default:x((()=>[k(V,{class:"w-full",shadow:"never"},{header:x((()=>[z("p",R,[i[22]||(i[22]=z("span",{class:"c-999"},"标题：",-1)),C(H(F.title),1)])])),default:x((()=>[i[23]||(i[23]=z("p",{class:"f-15"},[z("span",{class:"c-999"},"内容：")],-1)),z("div",{class:"f-15 article",innerHTML:F.article},null,8,A)])),_:1})])),_:1})):N("",!0)])),_:1}),k(_,{label:"保存配置",name:"save"},{default:x((()=>[k(p,{label:"保存栏目",prop:"articleTag",rules:[{required:!0,message:"请输入保存栏目",trigger:"blur"}]},{default:x((()=>[k(b,{props:K,"show-all-levels":!1,modelValue:B.value,"onUpdate:modelValue":i[10]||(i[10]=e=>B.value=e),options:P.value,onChange:G},null,8,["modelValue","options"])])),_:1}),k(p,{label:"发布状态",prop:"status",rules:[{required:!0,message:"请选择字符集",trigger:"blur"}]},{default:x((()=>[k(f,{modelValue:Q.status,"onUpdate:modelValue":i[11]||(i[11]=e=>Q.status=e),class:"ml-4"},{default:x((()=>[k(y,{value:"1",size:"large"},{default:x((()=>i[24]||(i[24]=[C("草稿")]))),_:1}),k(y,{value:"2",size:"large"},{default:x((()=>i[25]||(i[25]=[C("发布")]))),_:1})])),_:1},8,["modelValue"])])),_:1}),k(p,null,{default:x((()=>[k(h,{type:"primary",onClick:i[12]||(i[12]=e=>Z(l.value))},{default:x((()=>i[26]||(i[26]=[C("保存")]))),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["model"])])}}},[["__scopeId","data-v-e3da4894"]]))}}}));
