import{E as m,f as B,w as j,O as A,P as M,Q as N}from"./element-plus.js";import{u as O}from"./vue-router.js";import{H as Q,E as V}from"./@element-plus.js";import{l as $,a as z}from"./message.js";import{_ as H}from"./index.js";import{r as l,n as I,ab as L,c as s,o as i,O as t,L as r,a3 as g,Q as q,u as y}from"./@vue.js";import"./dayjs.js";import"./lodash-es.js";import"./@popperjs.js";import"./async-validator.js";import"./@ctrl.js";import"./memoize-one.js";import"./normalize-wheel-es.js";import"./pinia.js";import"./pinia-plugin-persist.js";import"./vanilla-jsoneditor.js";import"./json-source-map.js";import"./@jsonquerylang.js";import"./@fortawesome.js";import"./natural-compare-lite.js";import"./fast-deep-equal.js";import"./fast-uri.js";import"./jmespath.js";import"./jsonpath-plus.js";import"./@codemirror.js";import"./@lezer.js";import"./crelt.js";import"./@marijn.js";import"./style-mod.js";import"./w3c-keyname.js";import"./@replit.js";import"./immutable-json-patch.js";import"./jsonrepair.js";import"./axios.js";import"./js-cookie.js";import"./nprogress.js";/* empty css     */const F={class:"bg-fff radius-6 pd-20"},G={key:0},J={key:1},K={key:2},U={key:3},W={__name:"index",setup(X){const h=l(null),d=l([]),b=l([]),u=l(0),_=l(1),k=O(),w=Q,v=V;I(()=>{p()});const p=async()=>{try{const e=await $(_.value);e.code===200?(d.value=e.data.list,u.value=e.data.count):m({message:e.msg,type:"error"})}catch(e){console.log(e)}},C=e=>{_.value=e,p()},x=e=>{b.value=e},E=e=>{k.push({name:"message-edit",params:{id:e.id}})},D=async e=>{try{const n=await z(e.id);n.code===200?(m({message:"删除成功 ^_^",type:"success"}),p()):m({message:n.msg,type:"error"})}catch(n){console.log(n)}};return(e,n)=>{const c=B,T=L("router-link"),f=j,o=A,P=M,R=N;return i(),s("div",F,[t(f,{type:"flex",justify:"end"},{default:r(()=>[t(T,{to:"/message/add"},{default:r(()=>[t(c,{type:"primary",round:""},{default:r(()=>n[0]||(n[0]=[g("新增")])),_:1})]),_:1})]),_:1}),t(P,{ref_key:"multipleTableRef",ref:h,data:d.value,"tooltip-effect":"dark","row-key":"id",onSelectionChange:x},{default:r(()=>[t(o,{type:"selection"}),t(o,{prop:"id",width:"80",label:"编号"}),t(o,{prop:"title",width:"300",label:"标题"}),t(o,{prop:"type",label:"留言类型"},{default:r(a=>[a.row.type==1?(i(),s("span",G,"咨询")):a.row.type==2?(i(),s("span",J,"建议")):a.row.type==3?(i(),s("span",K,"投诉")):(i(),s("span",U,"其它"))]),_:1}),t(o,{prop:"name",label:"联系人"}),t(o,{prop:"tel",label:"手机号"}),t(o,{prop:"company",label:"公司单位"}),t(o,{prop:"createdAt",label:"发布时间"},{default:r(a=>[g(q(a.row.createdAt),1)]),_:1}),t(o,{fixed:"right",width:"100",label:"操作"},{default:r(a=>[t(c,{icon:y(w),circle:"",onClick:S=>E(a.row)},null,8,["icon","onClick"]),t(c,{icon:y(v),circle:"",onClick:S=>D(a.row)},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data"]),t(f,{type:"flex",class:"mt-20 align-c",justify:"center"},{default:r(()=>[t(R,{background:"",layout:"prev, pager, next",onCurrentChange:C,"page-size":10,total:u.value,"hide-on-single-page":""},null,8,["total"])]),_:1})])}}},Nt=H(W,[["__scopeId","data-v-6c0e1982"]]);export{Nt as default};
