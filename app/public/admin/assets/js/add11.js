import{r as E,s as x,D as h,F as w,a as C,G as I,f as B,q,E as i}from"./element-plus.js";import{u as D}from"./vue-router.js";import{c as F}from"./slide.js";import{a as M}from"./upload.js";import{_ as N}from"./index.js";import{r as R,W as O,ab as z,c as G,o as d,O as t,L as r,K as H,H as K,a3 as L}from"./@vue.js";import"./dayjs.js";import"./@element-plus.js";import"./lodash-es.js";import"./@popperjs.js";import"./async-validator.js";import"./@ctrl.js";import"./memoize-one.js";import"./normalize-wheel-es.js";import"./sys_config.js";import"./pinia.js";import"./pinia-plugin-persist.js";import"./vanilla-jsoneditor.js";import"./json-source-map.js";import"./@jsonquerylang.js";import"./@fortawesome.js";import"./natural-compare-lite.js";import"./fast-deep-equal.js";import"./fast-uri.js";import"./jmespath.js";import"./jsonpath-plus.js";import"./@codemirror.js";import"./@lezer.js";import"./crelt.js";import"./@marijn.js";import"./style-mod.js";import"./w3c-keyname.js";import"./@replit.js";import"./immutable-json-patch.js";import"./jsonrepair.js";import"./axios.js";import"./js-cookie.js";import"./nprogress.js";/* empty css     */const P={class:"bg-fff pd-20 radius-6"},S={__name:"add",setup(T){const u=D(),p=R(null),f={title:[{required:!0,message:"请输入标题",trigger:"blur"}]},o=O({title:"",imgUrl:"",linkUrl:""}),_=l=>l.type.indexOf("image")===-1?(i("上传文件只能是图片格式"),!1):l.size/1024/1024>.2?(i("上传图片必须小于200k"),!1):!0,g=async l=>{const e=new FormData;e.append("file",l.file);const a=await M(e);a.code===200&&(o.imgUrl=a.data.path)},U=()=>{p.value.validate(async l=>{if(l)try{const e=await F(o);e.code===200?(i({message:"新增成功^_^",type:"success"}),u.back()):i({message:e.msg,type:"error"})}catch(e){console.error(e)}else console.log("error submit!!")})};return(l,e)=>{const a=x,m=E,y=z("MostlyCloudy"),b=C,n=w,v=h,c=I,k=B,V=q;return d(),G("div",P,[t(V,{model:o,rules:f,ref_key:"formRef",ref:p,"label-width":"84px",class:"mt-20"},{default:r(()=>[t(m,{label:"轮播标题",prop:"title"},{default:r(()=>[t(a,{modelValue:o.title,"onUpdate:modelValue":e[0]||(e[0]=s=>o.title=s)},null,8,["modelValue"])]),_:1}),t(m,{class:"flex",label:"轮播图"},{default:r(()=>[t(v,{class:"avatar-uploader","http-request":g,"show-file-list":!1,"before-upload":_},{default:r(()=>[t(n,{placement:"top-start",title:"上传",width:200,trigger:"hover",content:"上传图片作为封面图，大小200k内"},{reference:r(()=>[t(b,{class:"avatar-uploader-icon"},{default:r(()=>[t(y)]),_:1})]),_:1})]),_:1}),o.imgUrl?(d(),H(n,{key:0,placement:"right",width:600,trigger:"hover"},{reference:r(()=>[t(c,{class:"avatar-uploader-icon pointer ml-10",src:o.imgUrl},null,8,["src"])]),default:r(()=>[t(c,{style:{width:"100%"},src:o.imgUrl},null,8,["src"])]),_:1})):K("",!0),t(a,{class:"ml-10 flex-1",modelValue:o.imgUrl,"onUpdate:modelValue":e[1]||(e[1]=s=>o.imgUrl=s)},null,8,["modelValue"])]),_:1}),t(m,{label:"轮播链接"},{default:r(()=>[t(a,{modelValue:o.linkUrl,"onUpdate:modelValue":e[2]||(e[2]=s=>o.linkUrl=s)},null,8,["modelValue"])]),_:1}),t(m,null,{default:r(()=>[t(k,{type:"primary",onClick:U},{default:r(()=>e[3]||(e[3]=[L("保存")])),_:1})]),_:1})]),_:1},8,["model"])])}}},qe=N(S,[["__scopeId","data-v-f40cf0c1"]]);export{qe as default};
