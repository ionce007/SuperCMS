System.register(["./element-plus-legacy.js","./vue-router-legacy.js","./slide-legacy.js","./upload-legacy.js","./@vue-legacy.js","./dayjs-legacy.js","./@element-plus-legacy.js","./lodash-es-legacy.js","./@popperjs-legacy.js","./async-validator-legacy.js","./@ctrl-legacy.js","./memoize-one-legacy.js","./normalize-wheel-es-legacy.js","./index-legacy.js","./pinia-legacy.js","./pinia-plugin-persist-legacy.js","./vanilla-jsoneditor-legacy.js","./json-source-map-legacy.js","./@jsonquerylang-legacy.js","./@fortawesome-legacy.js","./natural-compare-lite-legacy.js","./fast-deep-equal-legacy.js","./fast-uri-legacy.js","./jmespath-legacy.js","./jsonpath-plus-legacy.js","./@codemirror-legacy.js","./@lezer-legacy.js","./crelt-legacy.js","./@marijn-legacy.js","./style-mod-legacy.js","./w3c-keyname-legacy.js","./@replit-legacy.js","./immutable-json-patch-legacy.js","./jsonrepair-legacy.js","./axios-legacy.js","./js-cookie-legacy.js","./nprogress-legacy.js","./saduo-legacy.js","./sys_config-legacy.js"],(function(l,e){"use strict";var a,s,t,n,r,u,c,o,i,g,d,y,m,j,p,f,h,U,_,v,w,k,b,V,x;return{setters:[l=>{a=l.E,s=l.r,t=l.s,n=l.D,r=l.F,u=l.a,c=l.G,o=l.f,i=l.q},l=>{g=l.a,d=l.u},l=>{y=l.d,m=l.u},l=>{j=l.a},l=>{p=l.r,f=l.W,h=l.n,U=l.ab,_=l.c,v=l.o,w=l.O,k=l.L,b=l.K,V=l.H,x=l.a3},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){const e={class:"bg-fff pd-20 radius-6"};l("default",{__name:"edit",setup(l){const q=g(),z=d(),O=p(null),C=f({id:0,title:"",imgUrl:"",linkUrl:""});function D(l){return-1===l.type.indexOf("image")?(a("上传文件只能是图片格式"),!1):!(l.size/1024>200&&(a("上传图片必须小于200k"),1))}async function F(l){const e=new FormData;e.append("file",l.file);try{let l=await j(e);200===l.code&&(C.imgUrl=l.data.path)}catch(a){console.error(a)}}function E(){O.value.validate((l=>{if(!l)return console.log("error submit!!"),!1;!async function(){try{let l=await m(C);200==l.code?(a({message:"更新成功^_^",type:"success"}),z.go(-1)):a({message:l.msg,type:"error"})}catch(l){console.log(l)}}()}))}return h((async()=>{C.id=parseInt(q.params.id,10),await async function(){try{let l=await y(C.id);const{id:e,title:s,imgUrl:t,linkUrl:n}=l.data;200===l.code?Object.assign(C,{id:e,title:s,imgUrl:t,linkUrl:n}):a({message:l.msg,type:"error"})}catch(l){console.error(l)}}()})),(l,a)=>{const g=t,d=s,y=U("MostlyCloudy"),m=u,j=r,p=n,f=c,h=o,q=i;return v(),_("div",e,[w(q,{ref_key:"formRef",ref:O,model:C,"label-width":"84px",class:"mt-20"},{default:k((()=>[w(d,{label:"轮播标题",rules:[{required:!0,message:"请输入标题",trigger:"blur"}],prop:"title"},{default:k((()=>[w(g,{modelValue:C.title,"onUpdate:modelValue":a[0]||(a[0]=l=>C.title=l)},null,8,["modelValue"])])),_:1}),w(d,{class:"flex",label:"轮播图"},{default:k((()=>[w(p,{class:"avatar-uploader","http-request":F,"show-file-list":!1,"before-upload":D},{default:k((()=>[w(j,{placement:"top-start",title:"上传",width:200,trigger:"hover",content:"上传图片作为封面图，大小200k内"},{reference:k((()=>[w(m,{class:"avatar-uploader-icon"},{default:k((()=>[w(y)])),_:1})])),_:1})])),_:1}),C.imgUrl?(v(),b(j,{key:0,placement:"right",width:600,trigger:"hover"},{reference:k((()=>[w(f,{class:"avatar-uploader-icon pointer ml-10",src:C.imgUrl},null,8,["src"])])),default:k((()=>[w(f,{style:{width:"100%"},src:C.imgUrl},null,8,["src"])])),_:1})):V("",!0),w(g,{class:"ml-10 flex-1",modelValue:C.imgUrl,"onUpdate:modelValue":a[1]||(a[1]=l=>C.imgUrl=l)},null,8,["modelValue"])])),_:1}),w(d,{label:"轮播链接"},{default:k((()=>[w(g,{modelValue:C.linkUrl,"onUpdate:modelValue":a[2]||(a[2]=l=>C.linkUrl=l)},null,8,["modelValue"])])),_:1}),w(d,null,{default:k((()=>[w(h,{type:"primary",onClick:E},{default:k((()=>a[3]||(a[3]=[x("保存")]))),_:1})])),_:1})])),_:1},8,["model"])])}}})}}}));
