import{f as T,w as A,O as D,N as P,S as H,a as M,P as O,Q,E as R}from"./element-plus.js";import{H as U,E as j,B as q}from"./@element-plus.js";import{l as z,a as F}from"./sys_user.js";import{g as I}from"./index.js";import{u as K}from"./vue-router.js";import{r as i,n as L,ab as $,c as G,o as f,O as t,a as J,L as o,a3 as m,Q as b,K as W,H as X,u as l}from"./@vue.js";import"./dayjs.js";import"./lodash-es.js";import"./@popperjs.js";import"./async-validator.js";import"./@ctrl.js";import"./memoize-one.js";import"./normalize-wheel-es.js";import"./pinia.js";import"./pinia-plugin-persist.js";import"./vanilla-jsoneditor.js";import"./json-source-map.js";import"./@jsonquerylang.js";import"./@fortawesome.js";import"./natural-compare-lite.js";import"./fast-deep-equal.js";import"./fast-uri.js";import"./jmespath.js";import"./jsonpath-plus.js";import"./@codemirror.js";import"./@lezer.js";import"./crelt.js";import"./@marijn.js";import"./style-mod.js";import"./w3c-keyname.js";import"./@replit.js";import"./immutable-json-patch.js";import"./jsonrepair.js";import"./axios.js";import"./js-cookie.js";import"./nprogress.js";/* empty css     */const Y={class:"bg-fff radius-6 pd-20"},Z={class:"mr-10 ml-10"},Ut={__name:"index",setup(tt){const g=K(),u=i([]),h=i([]),d=i(0),s=i(1),_=I("username"),c=async()=>{try{const e=await z(s.value);e.code===200&&(u.value=[...e.data.list],d.value=e.data.count)}catch(e){console.log(e)}},v=e=>{s.value=e,c()},w=e=>{h.value=e},E=e=>{g.push({name:"user-edit",params:{id:e.id}})},y=async e=>{try{(await F(e.id)).code===200&&(R.success("删除成功 ^_^"),c())}catch(r){console.log(r)}};return L(()=>{c()}),(e,r)=>{const p=T,C=$("router-link"),k=A,n=D,x=P,B=M,N=H,S=O,V=Q;return f(),G("div",Y,[t(k,{type:"flex",justify:"end"},{default:o(()=>[t(C,{to:"/user/add"},{default:o(()=>[t(p,{type:"primary",round:""},{default:o(()=>r[0]||(r[0]=[m("新增")])),_:1})]),_:1})]),_:1}),J("div",Z,[t(S,{data:u.value,"tooltip-effect":"dark","row-key":"id",onSelectionChange:w},{default:o(()=>[t(n,{type:"selection"}),t(n,{prop:"id",width:"100",label:"编号"}),t(n,{prop:"username",label:"管理员"}),t(n,{prop:"value",label:"角色"}),t(n,{prop:"status",label:"状态"},{default:o(a=>[m(b(a.row.status==1?"启用":"关闭"),1)]),_:1}),t(n,{prop:"createdAt",label:"发布时间"},{default:o(a=>[m(b(a.row.createdAt),1)]),_:1}),t(n,{fixed:"right",width:"200",label:"操作"},{default:o(a=>[t(p,{icon:l(U),circle:"",onClick:et=>E(a.row)},null,8,["icon","onClick"]),t(x,{width:"220",onConfirm:()=>y(a.row),"confirm-button-text":"确定","cancel-button-text":"取消","icon-color":"#626AEF",title:"你确定吗？要删管理员？"},{reference:o(()=>[t(p,{icon:l(j),disabled:l(_)===a.row.username,circle:""},null,8,["icon","disabled"])]),_:2},1032,["onConfirm"]),l(_)===a.row.username?(f(),W(N,{key:0,content:"当前登录用户不可删除",effect:"light",placement:"top-start"},{default:o(()=>[t(B,{class:"ml-10 t-4 pointer"},{default:o(()=>[t(l(q),{class:"c-165dff"})]),_:1})]),_:1})):X("",!0)]),_:1})]),_:1},8,["data"]),t(V,{background:"",layout:"prev, pager, next",total:d.value,"page-size":10,"model-value":s.value,"onUpdate:modelValue":v,"hide-on-single-page":""},null,8,["total","model-value"])])])}}};export{Ut as default};
