import{f as x,D as L,F,a as S,s as U,M as B}from"./element-plus.js";import{d as T}from"./vue-cropper.js";import{ab as p,K as E,o as I,L as t,T as M,a as n,U as D,R as O,O as e,a3 as f}from"./@vue.js";import{_ as z}from"./index.js";const P={name:"DialogCropper",components:{VueCropper:T.VueCropper},props:{file:{type:Object,default:null},img:{type:String,default:""}},data(){return{dialogFormVisible:!1,width:"100%",height:"350px",model:!1,modelSrc:"",crap:!1,previews:{},option:{img:this.img,size:.7,full:!1,outputType:"png",centerBox:!0,max:99999},show:!0,fixed:!1,fixedNumber:[75,34]}},watch:{img:{handler(s){this.option.img=s},immediate:!0}},mounted:function(){},methods:{changeScale(s){s=s||1,this.$refs.cropper.changeScale(s)},rotateLeft(){this.$refs.cropper.rotateLeft()},rotateRight(){this.$refs.cropper.rotateRight()},realTime(s){this.previews=s},uploadImg(s){let l=s.file;if(l.type.indexOf("image")===-1)return this.$message("上传文件只能是图片格式"),!1;const d=new FileReader;d.onload=async u=>{let o;typeof u.target.result=="object"?o=window.URL.createObjectURL(new Blob([u.target.result])):o=u.target.result,this.option.img=o,this.dialogFormVisible=!0},d.readAsArrayBuffer(l)},imgLoad(s){console.log(s)},cropMoving(s){console.log(s,"截图框当前坐标")},handlerCancel(){this.$emit("crop"),this.dialogFormVisible=!1},handlerOk(){this.$refs.cropper.getCropBlob(s=>{let l=new File([s],this.file.name,{type:this.file.type});this.$emit("crop",l),this.dialogFormVisible=!1})}}},N={class:"model-show"},j=["src"],q={class:"flex items-start scroper-aside pt-6"},A={class:"flex items-center mb-6 pr-10"},H={class:"flex items-center pr-10"},K={class:"dialog-footer"};function W(s,l,d,u,o,i){const g=p("VueCropper"),h=p("Upload"),m=S,_=F,C=L,r=x,b=p("Plus"),w=p("Minus"),V=p("Refresh"),v=p("RefreshLeft"),k=p("RefreshRight"),R=p("Close"),c=U,y=B;return I(),E(y,{modelValue:o.dialogFormVisible,"onUpdate:modelValue":l[6]||(l[6]=a=>o.dialogFormVisible=a),title:"图片裁剪",width:"50%"},{footer:t(()=>[n("span",K,[e(r,{class:"mr-6",onClick:i.handlerCancel},{default:t(()=>l[9]||(l[9]=[f("取消")])),_:1},8,["onClick"]),e(r,{type:"primary",onClick:i.handlerOk},{default:t(()=>l[10]||(l[10]=[f("确定")])),_:1},8,["onClick"])])]),default:t(()=>[M(n("div",{class:"model",onClick:l[0]||(l[0]=a=>o.model=!1)},[n("div",N,[n("img",{src:o.modelSrc,alt:""},null,8,j)])],512),[[D,o.model]]),n("div",{class:"cut pos-r",style:O({width:o.width,height:o.height})},[e(g,{ref:"cropper",img:o.option.img,"output-size":o.option.size,"output-type":o.option.outputType,full:o.option.full,"auto-crop":!0,"auto-crop-width":120,"auto-crop-height":120,onRealTime:i.realTime,onImgLoad:i.imgLoad,mode:"contain",onCropMoving:i.cropMoving},null,8,["img","output-size","output-type","full","onRealTime","onImgLoad","onCropMoving"]),n("div",q,[e(r,{class:"ml-6 mb-4"},{default:t(()=>[e(C,{"http-request":i.uploadImg,"show-file-list":!1},{default:t(()=>[e(_,{placement:"top-start",title:"上传"},{reference:t(()=>[e(m,null,{default:t(()=>[e(h)]),_:1})]),_:1})]),_:1},8,["http-request"])]),_:1}),e(r,{class:"ml-6 mb-4",onClick:l[1]||(l[1]=a=>i.changeScale(1))},{default:t(()=>[e(m,null,{default:t(()=>[e(b)]),_:1})]),_:1}),e(r,{class:"ml-6 mb-4",onClick:l[2]||(l[2]=a=>i.changeScale(-1))},{default:t(()=>[e(m,null,{default:t(()=>[e(w)]),_:1})]),_:1}),e(r,{class:"ml-6 mb-4",onClick:s.refreshCrop},{default:t(()=>[e(m,null,{default:t(()=>[e(V)]),_:1})]),_:1},8,["onClick"]),e(r,{class:"ml-6 mb-4",onClick:i.rotateLeft},{default:t(()=>[e(m,null,{default:t(()=>[e(v)]),_:1})]),_:1},8,["onClick"]),e(r,{class:"ml-6 mb-4",onClick:i.rotateRight},{default:t(()=>[e(m,null,{default:t(()=>[e(k)]),_:1})]),_:1},8,["onClick"]),e(r,{class:"ml-6 mb-4",onClick:l[3]||(l[3]=()=>o.option.img="")},{default:t(()=>[e(m,null,{default:t(()=>[e(R)]),_:1})]),_:1}),n("div",A,[e(c,{class:"ml-6 w-full",modelValue:o.width,"onUpdate:modelValue":l[4]||(l[4]=a=>o.width=a),placeholder:"Please input"},null,8,["modelValue"]),l[7]||(l[7]=n("span",{class:"ml-3 mr-3"},"W",-1))]),n("div",H,[e(c,{class:"ml-6 w-full",modelValue:o.height,"onUpdate:modelValue":l[5]||(l[5]=a=>o.height=a),placeholder:"Please input"},null,8,["modelValue"]),l[8]||(l[8]=n("span",{class:"ml-3 mr-3"},"H",-1))])])],4)]),_:1},8,["modelValue"])}const Y=z(P,[["render",W],["__scopeId","data-v-6fb6db72"]]);export{Y as D};
