System.register(["./element-plus-legacy.js","./@vue-legacy.js","./vue-router-legacy.js","./category-legacy.js","./article-legacy.js","./tag-legacy.js","./sys_config-legacy.js","./tinymce-legacy.js","./DialogCroper-legacy.js","./upload-legacy.js","./index-legacy.js","./dayjs-legacy.js","./@element-plus-legacy.js","./lodash-es-legacy.js","./@popperjs-legacy.js","./async-validator-legacy.js","./@ctrl-legacy.js","./memoize-one-legacy.js","./normalize-wheel-es-legacy.js","./vue-cropper-legacy.js","./pinia-legacy.js","./pinia-plugin-persist-legacy.js","./vanilla-jsoneditor-legacy.js","./json-source-map-legacy.js","./@jsonquerylang-legacy.js","./@fortawesome-legacy.js","./natural-compare-lite-legacy.js","./fast-deep-equal-legacy.js","./fast-uri-legacy.js","./jmespath-legacy.js","./jsonpath-plus-legacy.js","./@codemirror-legacy.js","./@lezer-legacy.js","./crelt-legacy.js","./@marijn-legacy.js","./style-mod-legacy.js","./w3c-keyname-legacy.js","./@replit-legacy.js","./immutable-json-patch-legacy.js","./jsonrepair-legacy.js","./axios-legacy.js","./js-cookie-legacy.js","./nprogress-legacy.js","./saduo-legacy.js"],(function(e,l){"use strict";var a,t,u,d,o,s,n,r,c,i,m,p,v,f,g,y,V,b,_,h,j,w,x,k,U,C,A,I,D,S,z,q,O,E,F,T,L,P,R,B,J,M,H,K,N,$,G,W,Z,Q,X,Y,ee,le,ae,te,ue,de,oe,se;return{setters:[e=>{a=e.n,t=e.m,u=e.w,d=e.u,o=e.r,s=e.x,n=e.s,r=e.y,c=e.A,i=e.B,m=e.C,p=e.D,v=e.F,f=e.a,g=e.G,y=e.f,V=e.o,b=e.H,_=e.I,h=e.J,j=e.K,w=e.L,x=e.M,k=e.q,U=e.E},e=>{C=e.W,A=e.r,I=e.n,D=e.ab,S=e.c,z=e.o,q=e.a,O=e.O,E=e.L,F=e.K,T=e.H,L=e.T,P=e.a3,R=e.I,B=e.ac,J=e.U,M=e.u},e=>{H=e.u},e=>{K=e.f},e=>{N=e.f,$=e.d,G=e.c},e=>{W=e.s},e=>{Z=e.v},e=>{Q=e.t,X=e._},e=>{Y=e.D},e=>{ee=e.u,le=e.a},e=>{ae=e._,te=e.a,ue=e.t,de=e.b,oe=e.c,se=e.f},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){var l=document.createElement("style");l.textContent="[data-v-32122d4d] .tiny-textarea{height:436px}.cover div[data-v-32122d4d]{width:100px;height:100px;cursor:pointer}.w-300[data-v-32122d4d]{width:300px!important}[data-v-32122d4d] .el-drawer{width:280px!important}[data-v-32122d4d] .el-drawer__body{padding:0}.imgs-btn[data-v-32122d4d]{position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.5);color:#fff;font-size:20px;cursor:pointer;justify-content:center;align-items:center;gap:30px;display:none;transition:all .3s}.img-item[data-v-32122d4d]{position:relative;margin-right:10px;cursor:pointer;overflow:hidden;border-radius:5px;border:1px solid #f2f2f2}.img-item:hover .imgs-btn[data-v-32122d4d]{display:flex}.upload-icon[data-v-32122d4d]{border:1px dashed #dcdfe6;border-radius:6px;cursor:pointer;position:relative;overflow:hidden;transition:.2s;font-size:28px;color:#8c939d;width:100px;height:100px;text-align:center}\n/*$vite$:1*/",document.head.appendChild(l);const ne={class:"bg-fff pd-10 radius-6"},re={class:"mr-10 ml-10"},ce={class:"mr-10 ml-10 mb-20"},ie={class:"cover row"},me={class:"cover flex align-center"},pe={class:"imgs-btn"};e("default",ae({__name:"add",setup(e){const l=H(),ae=C({...Q}),ve=A(!0),fe=A([-1]),ge={checkStrictly:!0},ye=A("first"),Ve=A("0"),be=A([]),_e=A([]),he=A([]),je=A(!1),we=A(!1),xe=A(1),ke=A([]),Ue=A(),Ce=A(),Ae=A(),Ie=A(""),De=C({cid:0,title:"",shortTitle:"",tagId:"",attr:[],articleView:"",source:"",author:"",description:"",img:"",createdAt:new Date,updatedAt:new Date,content:"欢迎使用SuperCMS系统",status:"0",pv:1,link:""}),Se=A([]),ze=A(""),qe=A(!1),Oe=A(1),Ee=A(!1),Fe=A(["/public/cover/01.jpg","/public/cover/02.jpg","/public/cover/03.jpg","/public/cover/04.jpg","/public/cover/05.jpg","/public/cover/06.jpg","/public/cover/07.jpg","/public/cover/08.jpg","/public/cover/09.jpg","/public/cover/10.jpg"]),Te=async e=>{try{const l=await W(Oe.value,e);200===l.code&&l.data&&(ke.value=l.data.list.map((e=>({label:e.name,value:e.id}))))}catch(l){console.error(l)}},Le=e=>{-1!==e[0]?(De.cid=e[e.length-1],Pe(De.cid)):Se.value=[]},Pe=async e=>{try{const l=await N(e);200===l.code&&(l.data.fields.forEach((e=>{if(e.default&&e.default.includes("[{")&&e.default.includes("options")){const l=JSON.parse(e.default);e.default=l.options||[]}"8"===e.type&&(e.values=[])})),Se.value=l.data.fields)}catch(l){console.error(l)}},Re=()=>{ve.value=!1},Be=e=>{Ve.value=e.index},Je=e=>{if(-1===e.type.indexOf("image"))return U({message:"上传文件只能是图片格式",type:"success"}),!1;Ue.value=e;const l=new FileReader;return l.onload=async e=>{let l;l="object"==typeof e.target.result?window.URL.createObjectURL(new Blob([e.target.result])):e.target.result,Ie.value=l,Ce.value.dialogFormVisible=!0},l.readAsArrayBuffer(e),!0},Me=async()=>{if(Ue.value.size/1024/1024>.2)return U({message:"上传图片必须小于200k",type:"success"}),!1;const e=new FormData;e.append("file",Ue.value);const l=await le(e);200===l.code&&(De.img=l.data.path)},He=e=>-1===e.type.indexOf("image")?(U({message:"上传文件只能是图片格式",type:"success"}),!1):e.size/1024/1024>.2?(U({message:"上传图片必须小于200k",type:"success"}),!1):void 0,Ke=async e=>{const{data:{index:l},file:a}=e,t=new FormData;t.append("file",a);const u=await le(t);if(200===u.code){const{filename:e,path:a}=u.data;Array.isArray(Se.value[l].values)?Se.value[l].values.push({name:e,url:a}):Se.value[l].values=[{name:e,url:a}]}},Ne=async e=>{try{await $(e)}catch(l){console.error(l)}},$e=async e=>{e&&await e.validate(((e,a)=>{if(e){if(0===De.cid)return void U({message:"请选择栏目^_^",type:"success"});(async()=>{try{const e={...De};e.attr=De.attr.toString(),e.tagId=De.tagId.toString(),!De.img&&je.value&&(De.img=oe(De.content)[0]),!De.description&&we.value&&(De.description=se(De.content).substr(0,255));const a=Se.value.reduce(((e,l)=>(e[l.ename]=Array.isArray(l.values)?JSON.stringify(l.values):l.values,e)),{}),t=await G({defaultParams:e,fieldParams:a});200===t.code?(U({message:"更新成功^_^",type:"success"}),l.go(-1)):U({message:t.msg,type:"error"})}catch(e){console.error(e)}})()}else de(a)}))};return I((async()=>{ae.images_upload_url=await ee(),await(async()=>{try{const e=await K();if(200===e.code){const l=te(ue(e.data)),a=te(e.data);_e.value=a,be.value=[...l]}}catch(e){console.error(e)}})(),await Te(),await(async()=>{try{const e=await Z();200===e.code&&(he.value=e.data.filter((e=>!["404.html","500.html"].includes(e))).map((e=>({label:e,value:e}))),console.log(he.value))}catch(e){console.error(e)}})()})),(e,l)=>{const U=a,C=t,A=s,I=o,H=d,K=n,N=r,$=i,G=c,W=m,Z=D("MostlyCloudy"),Q=f,ee=v,te=p,ue=g,de=y,oe=V,se=u,_e=b,Oe=j,Pe=h,Ge=w,We=D("ZoomIn"),Ze=D("Delete"),Qe=x,Xe=D("Plus"),Ye=k,el=_;return z(),S("div",ne,[q("div",re,[O(C,{modelValue:ye.value,"onUpdate:modelValue":l[0]||(l[0]=e=>ye.value=e),onTabClick:Be},{default:E((()=>[O(U,{label:"基本信息",name:"first"}),O(U,{label:"扩展信息",name:"second"}),Se.value.length>0?(z(),F(U,{key:0,label:"模型信息",name:"three"})):T("",!0)])),_:1},8,["modelValue"])]),q("div",ce,[O(Ye,{ref_key:"paramsRef",ref:Ae,model:De,"label-width":"90px"},{default:E((()=>[L((z(),S("div",null,[O(se,{gutter:20},{default:E((()=>[O(H,{sm:24,md:12},{default:E((()=>[O(I,{label:"文章栏目"},{default:E((()=>[O(A,{props:ge,"show-all-levels":!1,modelValue:fe.value,"onUpdate:modelValue":l[1]||(l[1]=e=>fe.value=e),options:be.value,onChange:Le},null,8,["modelValue","options"])])),_:1})])),_:1}),O(H,{sm:24,md:12},{default:E((()=>[O(I,{label:"文章标题",prop:"title",rules:[{required:!0,message:"请输入文章标题",trigger:"blur"},{min:1,max:100,message:"标题不能超过100个字",trigger:"blur"}]},{default:E((()=>[O(K,{modelValue:De.title,"onUpdate:modelValue":l[2]||(l[2]=e=>De.title=e)},null,8,["modelValue"])])),_:1})])),_:1}),O(H,{sm:24,md:12},{default:E((()=>[O(I,{label:"tag标签"},{default:E((()=>[O(N,{modelValue:De.tagId,"onUpdate:modelValue":l[3]||(l[3]=e=>De.tagId=e),options:ke.value,placeholder:"请选择标签",style:{width:"240px"},multiple:"",filterable:"",remote:"","remote-method":Te},null,8,["modelValue","options"])])),_:1})])),_:1}),O(H,{sm:24,md:12},{default:E((()=>[O(I,{label:"内容属性"},{default:E((()=>[O(G,{modelValue:De.attr,"onUpdate:modelValue":l[4]||(l[4]=e=>De.attr=e)},{default:E((()=>[O($,{label:"1",value:"1"},{default:E((()=>l[24]||(l[24]=[P("头条")]))),_:1}),O($,{label:"2",value:"2"},{default:E((()=>l[25]||(l[25]=[P("推荐")]))),_:1}),O($,{label:"3",value:"3"},{default:E((()=>l[26]||(l[26]=[P("轮播")]))),_:1}),O($,{label:"4",value:"4"},{default:E((()=>l[27]||(l[27]=[P("热门")]))),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1}),O(H,{sm:24,md:12},{default:E((()=>[O(I,{label:"发布时间"},{default:E((()=>[O(W,{modelValue:De.createdAt,"onUpdate:modelValue":l[5]||(l[5]=e=>De.createdAt=e),"default-value":new Date,type:"datetime",placeholder:"选择日期时间"},null,8,["modelValue","default-value"])])),_:1})])),_:1}),O(H,{sm:24,md:12},{default:E((()=>[O(I,{class:"flex",label:"缩略图"},{default:E((()=>[O(te,{class:"avatar-uploader","http-request":Me,"show-file-list":!1,"before-upload":Je},{default:E((()=>[O(ee,{placement:"top-start",title:"上传",width:200,trigger:"hover",content:"上传图片作为封面图，大小200k内"},{reference:E((()=>[O(Q,{class:"avatar-uploader-icon"},{default:E((()=>[O(Z)])),_:1})])),_:1})])),_:1}),De.img?(z(),F(ee,{key:0,placement:"right",width:400,trigger:"hover"},{reference:E((()=>[O(ue,{class:"avatar-uploader-icon pointer ml-10",src:De.img},null,8,["src"])])),default:E((()=>[O(ue,{style:{width:"100%"},src:De.img},null,8,["src"])])),_:1})):T("",!0),O(de,{type:"primary",class:"ml-10",onClick:l[6]||(l[6]=e=>Ee.value=!0)},{default:E((()=>l[28]||(l[28]=[P(" 默认封面图 ")]))),_:1}),O(oe,{modelValue:Ee.value,"onUpdate:modelValue":l[7]||(l[7]=e=>Ee.value=e),title:"默认封面图",class:"w-300","with-header":!1},{default:E((()=>[q("div",ie,[(z(!0),S(R,null,B(Fe.value,((e,l)=>(z(),F(ue,{key:l,src:e,onClick:l=>{return a=e,void(De.img=a);var a},fit:"cover"},null,8,["src","onClick"])))),128))])])),_:1},8,["modelValue"]),O(K,{class:"ml-10 flex-1",modelValue:De.img,"onUpdate:modelValue":l[8]||(l[8]=e=>De.img=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),O(I,{label:"内容摘要"},{default:E((()=>[O(K,{type:"textarea",rows:2,placeholder:"请输入内容",modelValue:De.description,"onUpdate:modelValue":l[9]||(l[9]=e=>De.description=e)},null,8,["modelValue"])])),_:1}),O(I,{label:"文章内容"},{default:E((()=>[O(X,{modelValue:De.content,"onUpdate:modelValue":l[10]||(l[10]=e=>De.content=e),setting:ae,onInit:Re,"script-src":"/public/admin/tinymce/tinymce.min.js"},null,8,["modelValue","setting"])])),_:1}),O(se,{gutter:20},{default:E((()=>[O(H,{sm:24,md:12,lg:8},{default:E((()=>[O(I,{label:"自动封面"},{default:E((()=>[O($,{modelValue:je.value,"onUpdate:modelValue":l[12]||(l[12]=e=>je.value=e)},{default:E((()=>[l[29]||(l[29]=P(" 文章第 ")),O(K,{modelValue:xe.value,"onUpdate:modelValue":l[11]||(l[11]=e=>xe.value=e),class:"w-80 mr-8 ml-8",placeholder:"请输入内容"},null,8,["modelValue"]),l[30]||(l[30]=P("张图 "))])),_:1},8,["modelValue"])])),_:1})])),_:1}),O(H,{sm:24,md:12,lg:8},{default:E((()=>[O(I,{label:"提取描述"},{default:E((()=>[O($,{modelValue:we.value,"onUpdate:modelValue":l[13]||(l[13]=e=>we.value=e)},{default:E((()=>l[31]||(l[31]=[P("提取文章描述")]))),_:1},8,["modelValue"])])),_:1})])),_:1}),O(H,{sm:24,md:12,lg:8},{default:E((()=>[O(I,{label:"是否显示"},{default:E((()=>[O(_e,{modelValue:De.status,"onUpdate:modelValue":l[14]||(l[14]=e=>De.status=e),value:"0"},{default:E((()=>l[32]||(l[32]=[P("发布")]))),_:1},8,["modelValue"]),O(_e,{modelValue:De.status,"onUpdate:modelValue":l[15]||(l[15]=e=>De.status=e),value:"1"},{default:E((()=>l[33]||(l[33]=[P("不发布")]))),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1})])),[[J,0==Ve.value],[el,ve.value]]),L(q("div",null,[O(se,{gutter:20},{default:E((()=>[O(H,{sm:24,md:12},{default:E((()=>[O(I,{label:"短标题",prop:"name"},{default:E((()=>[O(K,{modelValue:De.shortTitle,"onUpdate:modelValue":l[16]||(l[16]=e=>De.shortTitle=e)},null,8,["modelValue"])])),_:1})])),_:1}),O(H,{sm:24,md:12},{default:E((()=>[O(I,{label:"内容模板"},{default:E((()=>[O(Pe,{modelValue:De.articleView,"onUpdate:modelValue":l[17]||(l[17]=e=>De.articleView=e),placeholder:"请选择模板"},{default:E((()=>[(z(!0),S(R,null,B(he.value,(e=>(z(),F(Oe,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),O(H,{sm:24,md:12},{default:E((()=>[O(I,{label:"来源"},{default:E((()=>[O(K,{modelValue:De.source,"onUpdate:modelValue":l[18]||(l[18]=e=>De.source=e)},null,8,["modelValue"])])),_:1})])),_:1}),O(H,{sm:24,md:12},{default:E((()=>[O(I,{label:"作者"},{default:E((()=>[O(K,{modelValue:De.author,"onUpdate:modelValue":l[19]||(l[19]=e=>De.author=e)},null,8,["modelValue"])])),_:1})])),_:1}),O(H,{sm:24,md:12},{default:E((()=>[O(I,{label:"外链跳转"},{default:E((()=>[O(K,{modelValue:De.link,"onUpdate:modelValue":l[20]||(l[20]=e=>De.link=e),max:"120"},null,8,["modelValue"])])),_:1})])),_:1}),O(H,{sm:24,md:12},{default:E((()=>[O(I,{label:"浏览数"},{default:E((()=>[O(K,{modelValue:De.pv,"onUpdate:modelValue":l[21]||(l[21]=e=>De.pv=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})],512),[[J,1==Ve.value]]),L(q("div",null,[O(se,{gutter:20},{default:E((()=>[(z(!0),S(R,null,B(Se.value,((e,a)=>(z(),F(H,{key:a,sm:24,md:24,lg:24},{default:E((()=>[["1","7"].includes(e.type)?(z(),F(I,{key:0,label:e.cname},{default:E((()=>[O(K,{modelValue:e.values,"onUpdate:modelValue":l=>e.values=l,max:"120"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["label"])):["2","9"].includes(e.type)?(z(),F(I,{key:1,label:e.cname},{default:E((()=>[O(K,{type:"textarea",rows:4,placeholder:"请输入内容",modelValue:e.values,"onUpdate:modelValue":l=>e.values=l},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["label"])):["4"].includes(e.type)?(z(),F(I,{key:2,label:e.cname},{default:E((()=>[O(Ge,{modelValue:e.values,"onUpdate:modelValue":l=>e.values=l},{default:E((()=>[(z(!0),S(R,null,B(e.defaultVal,(e=>(z(),F(_e,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1032,["label"])):["3","5"].includes(e.type)?(z(),F(I,{key:3,label:e.cname},{default:E((()=>[O(Pe,{modelValue:e.values,"onUpdate:modelValue":l=>e.values=l,placeholder:"请选择"},{default:E((()=>[(z(!0),S(R,null,B(e.defaultVal,(e=>(z(),F(Oe,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1032,["label"])):"6"===e.type?(z(),F(I,{key:4,label:e.cname},{default:E((()=>[O(W,{modelValue:e.values,"onUpdate:modelValue":l=>e.values=l,"default-value":new Date,type:"datetime",placeholder:"请选择"},null,8,["modelValue","onUpdate:modelValue","default-value"])])),_:2},1032,["label"])):"8"===e.type?(z(),F(I,{key:5,label:e.cname,class:"flex align-c justify-center"},{default:E((()=>[q("div",me,[(z(!0),S(R,null,B(e.values,((e,l)=>(z(),S("div",{class:"pos-r img-item",key:l},[(z(),F(ue,{key:l,src:e.url,fit:"cover"},null,8,["src"])),q("div",pe,[O(Q,{onClick:l=>(async e=>{ze.value=e.url,qe.value=!0})(e)},{default:E((()=>[O(We)])),_:2},1032,["onClick"]),O(Q,{onClick:l=>(async e=>{Se.value.forEach(((l,a)=>{Array.isArray(l.values)&&l.values.forEach(((a,t)=>{a.url===e.url&&(Ne(e.url),l.values.splice(t,1))}))}))})(e)},{default:E((()=>[O(Ze)])),_:2},1032,["onClick"])])])))),128))]),O(Qe,{modelValue:qe.value,"onUpdate:modelValue":l[22]||(l[22]=e=>qe.value=e)},{default:E((()=>[O(ue,{"w-full":"",src:ze.value,alt:"Preview Image"},null,8,["src"])])),_:1},8,["modelValue"]),O(te,{multiple:"","http-request":Ke,data:{...e,index:a},"before-upload":He,limit:10,"show-file-list":!1},{default:E((()=>[O(Q,{class:"upload-icon"},{default:E((()=>[O(Xe)])),_:1})])),_:2},1032,["data"])])),_:2},1032,["label"])):T("",!0)])),_:2},1024)))),128))])),_:1})],512),[[J,2==Ve.value&Se.value.length>0]]),O(I,null,{default:E((()=>[O(de,{type:"primary",onClick:l[23]||(l[23]=e=>$e(Ae.value))},{default:E((()=>l[34]||(l[34]=[P("保存")]))),_:1})])),_:1})])),_:1},8,["model"])]),O(Y,{ref_key:"dialogCrop",ref:Ce,img:Ie.value,file:Ue.value,onCrop:M(le)},null,8,["img","file","onCrop"])])}}},[["__scopeId","data-v-32122d4d"]]))}}}));
